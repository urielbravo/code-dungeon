---
import BaseLayout from "../layouts/BaseLayout.astro"
import BlogPost from "../components/BlogPost.astro"
import Torch from "../components/Torch.astro"

const allPosts = await Astro.glob('../pages/posts/*.md');
const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())]
---


<BaseLayout title="The Blog">
    <Torch title="The Blog" />
    <div class="grid grid-cols-6 gap-4 w-full px-20">
      <section class="col-span-4">
        {allPosts.map(post => <BlogPost title={post.frontmatter.title} intro={post.frontmatter.description} pubDate={post.frontmatter.pubDate} tags={post.frontmatter.tags} url={`${post.url}`} />)}
      </section>
      <section class="col-span-2 text-center">
        <span class="text-xl mb-5">Tags</span>
        {
      tags.map((tag) => (
        <p class="tag">
          <a href={`/tags/${tag}`}>{tag}</a>
        </p>
      ))
    }
      </section>
    </div>
    
</BaseLayout>
